<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CultiVAIte Dashboard</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        /* Page transition (simple fade) */
        .page-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .page-section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Styling for file input */
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        .file-input-wrapper input[type=file] {
            font-size: 100px;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
        }
        /* Simple loader */
        .loader {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #10B981;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>

<body class="bg-gray-100">

    <!-- ===== Auth Container (Login/Signup) ===== -->
    <div id="auth-container" class="min-h-screen flex items-center justify-center bg-gray-100 p-4">
        <div class="max-w-md w-full bg-white shadow-xl rounded-lg p-8">
            <!-- Logo -->
            <div class="flex items-center justify-center gap-3 mb-6">
                <svg class="w-12 h-12 text-emerald-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" />
                </svg>
                <span class="text-3xl font-bold text-gray-800">CultiVAIte</span>
            </div>

            <!-- Auth Forms -->
            <div>
                <!-- Login Form -->
                <form id="login-form">
                    <h2 class="text-2xl font-semibold text-center text-gray-700 mb-4">Sign In</h2>
                    <div class="space-y-4">
                        <div>
                            <label for="login-email" class="block text-sm font-medium text-gray-600">Email</label>
                            <input type="email" id="login-email" required class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent" placeholder="you@example.com">
                        </div>
                        <div>
                            <label for="login-password" class="block text-sm font-medium text-gray-600">Password</label>
                            <input type="password" id="login-password" required class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent" placeholder="••••••••">
                        </div>
                        <button type="submit" class="w-full py-3 px-6 bg-emerald-600 text-white font-medium rounded-lg shadow-md hover:bg-emerald-700 transition-colors">
                            Sign In
                        </button>
                    </div>
                </form>

                <!-- Signup Form -->
                <form id="signup-form" class="mt-6 hidden">
                    <h2 class="text-2xl font-semibold text-center text-gray-700 mb-4">Create Account</h2>
                    <div class="space-y-4">
                        <div>
                            <label for="signup-email" class="block text-sm font-medium text-gray-600">Email</label>
                            <input type="email" id="signup-email" required class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent" placeholder="you@example.com">
                        </div>
                        <div>
                            <label for="signup-password" class="block text-sm font-medium text-gray-600">Password</label>
                            <input type="password" id="signup-password" required class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent" placeholder="Minimum 6 characters">
                        </div>
                         <div>
                            <label for="signup-confirm-password" class="block text-sm font-medium text-gray-600">Confirm Password</label>
                            <input type="password" id="signup-confirm-password" required class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent" placeholder="••••••••">
                        </div>
                        <button type="submit" class="w-full py-3 px-6 bg-emerald-600 text-white font-medium rounded-lg shadow-md hover:bg-emerald-700 transition-colors">
                            Sign Up
                        </button>
                    </div>
                </form>

                <!-- OR Separator -->
                <div class="my-6 flex items-center justify-center">
                    <span class="border-t border-gray-300 flex-grow"></span>
                    <span class="px-4 text-sm font-medium text-gray-500">OR</span>
                    <span class="border-t border-gray-300 flex-grow"></span>
                </div>

                <!-- Social Login Buttons -->
                <div class="space-y-3">
                    <button id="google-signin" class="w-full flex items-center justify-center gap-3 py-3 px-4 border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition-colors">
                        <svg class="w-5 h-5" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"/><path fill="#FF3D00" d="m6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z"/><path fill="#4CAF50" d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.211 35.091 26.715 36 24 36c-5.223 0-9.64-3.357-11.303-8H24v-8H12.703c-1.649-4.657-6.08-8-11.303-8z"/><path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303c-0.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C41.382 36.178 44 30.563 44 24c0-1.341-.138-2.65-.389-3.917z"/></svg>
                        <span class="font-medium text-gray-700">Continue with Google</span>
                    </button>
                    <button id="facebook-signin" class="w-full flex items-center justify-center gap-3 py-3 px-4 rounded-lg shadow-sm bg-[#1877F2] text-white hover:bg-[#166eab] transition-colors">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/></svg>
                        <span class="font-medium">Continue with Facebook</span>
                    </button>
                    <button id="twitter-signin" class="w-full flex items-center justify-center gap-3 py-3 px-4 rounded-lg shadow-sm bg-black text-white hover:bg-gray-800 transition-colors">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231L18.244 2.25zM17.017 19.75h1.668L7.028 4.25H5.32l11.697 15.5z"/></svg>
                        <span class="font-medium">Continue with X (Twitter)</span>
                    </button>
                </div>

                <!-- Auth Toggle -->
                <p class="text-center text-sm text-gray-500 mt-6">
                    <span id="toggle-to-signup-text">
                        Don't have an account? <button id="toggle-to-signup" class="font-medium text-emerald-600 hover:underline">Sign Up</button>
                    </span>
                    <span id="toggle-to-login-text" class="hidden">
                        Already have an account? <button id="toggle-to-login" class="font-medium text-emerald-600 hover:underline">Sign In</button>
                    </span>
                </p>

                <!-- Auth Error Message -->
                <p id="auth-error" class="text-center text-sm text-red-600 mt-4"></p>
            </div>
        </div>
    </div>


    <!-- ===== Main App Container (Hidden by default) ===== -->
    <div id="main-app-container" class="flex h-screen overflow-hidden hidden">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-64 bg-white shadow-lg p-6 fixed inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 transition-transform duration-300 ease-in-out z-30">
            <!-- Logo -->
            <div class="flex items-center gap-3 mb-8">
                <!-- Icon -->
                <svg class="w-10 h-10 text-emerald-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" />
                </svg>
                <span class="text-2xl font-bold text-gray-800">CultiVAIte</span>
            </div>

            <!-- Navigation -->
            <nav class="space-y-2">
                <a href="#" class="nav-link flex items-center gap-3 py-3 px-4 rounded-lg text-gray-700 font-medium bg-emerald-100 text-emerald-700" data-page="dashboard">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-link flex items-center gap-3 py-3 px-4 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-900 font-medium" data-page="ai-advisor">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>
                    <span>AI Crop Advisor</span>
                </a>
                <a href="#" class="nav-link flex items-center gap-3 py-3 px-4 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-900 font-medium" data-page="weather">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/><path d="M22 10a3 3 0 0 0-3-3h-2.2a8 8 0 0 0-15.3 1.3A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 0-9Z"/></svg>
                    <span>Weather Forecast</span>
                </a>
                <a href="#" class="nav-link flex items-center gap-3 py-3 px-4 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-900 font-medium" data-page="market">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="20" y2="10"/><line x1="18" x2="18" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="16"/></svg>
                    <span>Market Prices</span>
                </a>
                <a href="#" class="nav-link flex items-center gap-3 py-3 px-4 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-900 font-medium" data-page="management">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
                    <span>Farm Management</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-y-auto">
            <!-- Header -->
            <header class="bg-white shadow-sm p-4 flex justify-between items-center sticky top-0 z-20">
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-button" class="md:hidden p-2 text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" x2="21" y1="12" y2="12"/><line x1="3" x2="21" y1="6" y2="6"/><line x1="3" x2="21" y1="18" y2="18"/></svg>
                </button>
                <h1 id="page-title" class="text-xl font-semibold text-gray-800">Dashboard</h1>
                <!-- Profile -->
                <div class="flex items-center gap-4">
                    <span id="user-greeting" class="text-gray-600 hidden sm:inline text-sm"></span>
                    <button id="logout-button" class="py-2 px-4 bg-emerald-600 text-white text-sm font-medium rounded-lg shadow-md hover:bg-emerald-700 transition-colors">
                        Sign Out
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <main class="p-6 md:p-10 space-y-8">

                <!-- ===== PAGE: Dashboard ===== -->
                <section id="page-dashboard" class="page-section active">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-4">
                            <div class="p-3 bg-emerald-100 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-emerald-600"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Market Value</p>
                                <p class="text-2xl font-bold text-gray-800">₹1,24,500</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-4">
                            <div class="p-3 bg-blue-100 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600"><path d="M21.2 15c.7-1.2 1-2.5.7-3.9-.6-2.4-3.4-4-6.4-4-1.4 0-2.8.6-3.8 1.6l-4 4c-1.1 1-1.6 2.4-1.4 3.8.6 2.4 3.4 4 6.4 4 1.4 0 2.8-.6 3.8-1.6l.4-.4"/></svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Soil Moisture</p>
                                <p class="text-2xl font-bold text-gray-800">62%</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-4">
                            <div class="p-3 bg-amber-100 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-amber-600"><path d="M20.2 14.8a2.2 2.2 0 0 0-2.2-2.2H7.8a2.2 2.2 0 0 0-2.2 2.2l-.1 1.6a2.2 2.2 0 0 0 2.2 2.2h12.6a2.2 2.2 0 0 0 2.2-2.2l-.1-1.6z"/><path d="m2 10 3.2-6.4A2 2 0 0 1 7 2h10a2 2 0 0 1 1.8 1.6L22 10Z"/><path d="M7 10v0"/><path d="M17 10v0"/></svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Pest Alerts</p>
                                <p class="text-2xl font-bold text-gray-800">2 Critical</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-lg flex items-center gap-4">
                            <div class="p-3 bg-red-100 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-600"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Tasks Due</p>
                                <p class="text-2xl font-bold text-gray-800">3 Today</p>
                            </div>
                        </div>
                    </div>

                    <!-- Main Dashboard Area -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Weather Widget -->
                        <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-lg">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">Weather - Pune, IN</h2>
                            <div class="flex flex-col sm:flex-row gap-6">
                                <!-- Current Weather -->
                                <div class="flex-1 flex items-center gap-4 p-4 bg-gradient-to-br from-emerald-500 to-emerald-700 text-white rounded-lg">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/><path d="M22 10a3 3 0 0 0-3-3h-2.2a8 8 0 0 0-15.3 1.3A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 0-9Z"/></svg>
                                    <div>
                                        <p class="text-5xl font-bold" id="weather-temp">28°C</p>
                                        <p class="text-lg" id="weather-desc">Partly Cloudy</p>
                                    </div>
                                </div>
                                <!-- Forecast -->
                                <div class="flex-2 space-y-3">
                                    <h3 class="font-semibold text-gray-600">3-Day Forecast</h3>
                                    <div class="flex justify-between items-center text-gray-700">
                                        <span>Tomorrow</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-amber-500"><circle cx="12" cy="12" r="5"/><line x1="12" x2="12" y1="1" y2="3"/><line x1="12" x2="12" y1="21" y2="23"/><line x1="4.22" x2="5.64" y1="4.22" y2="5.64"/><line x1="18.36" x2="19.78" y1="18.36" y2="19.78"/><line x1="1" x2="3" y1="12" y2="12"/><line x1="21" x2="23" y1="12" y2="12"/><line x1="4.22" x2="5.64" y1="19.78" y2="18.36"/><line x1="18.36" x2="19.78" y1="5.64" y2="4.22"/></svg>
                                        <span class="font-medium">30°C / 22°C</span>
                                    </div>
                                    <div class="flex justify-between items-center text-gray-700">
                                        <span>In 2 days</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-500"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h3l2-3h6l2 3h3a2 2 0 0 1 2 2z"/><line x1="12" x2="12" y1="11" y2="17"/><line x1="9" x2="15" y1="14" y2="14"/></svg>
                                        <span class="font-medium">27°C / 21°C</span>
                                    </div>
                                    <div class="flex justify-between items-center text-gray-700">
                                        <span>In 3 days</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-500"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/></svg>
                                        <span class="font-medium">29°C / 23°C</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions / Tasks -->
                        <div class="bg-white p-6 rounded-lg shadow-lg">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">Today's Tasks</h2>
                            <ul class="space-y-4">
                                <li class="flex items-center gap-3">
                                    <input type="checkbox" class="h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500">
                                    <div>
                                        <p class="font-medium text-gray-800">Irrigate Field B</p>
                                        <p class="text-sm text-gray-500">Due by 10:00 AM</p>
                                    </div>
                                </li>
                                <li class="flex items-center gap-3">
                                    <input type="checkbox" class="h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500">
                                    <div>
                                        <p class="font-medium text-gray-800">Check Aphid Traps (Tomatoes)</p>
                                        <p class="text-sm text-gray-500">Pest Alert Active</p>
                                    </div>
                                </li>
                                <li class="flex items-center gap-3">
                                    <input type="checkbox" class="h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500" checked>
                                    <div>
                                        <p class="font-medium text-gray-800 line-through">Check NPK Levels (Field A)</p>
                                        <p class="text-sm text-gray-500">Completed 8:15 AM</p>
                                    </div>
                                </li>
                                <li class="flex items-center gap-3">
                                    <input type="checkbox" class="h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500">
                                    <div>
                                        <p class="font-medium text-gray-800">Schedule Corn Harvest Pickup</p>
                                        <p class="text-sm text-gray-500">Market Price is high</p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- ===== PAGE: AI Crop Advisor ===== -->
                <section id="page-ai-advisor" class="page-section">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Image Analysis -->
                        <div class="bg-white p-6 rounded-lg shadow-lg">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">Analyze Crop Health (Image)</h2>
                            <p class="text-gray-600 mb-4">Upload an image of a leaf or plant, and our AI will identify potential diseases, pests, or nutrient deficiencies.</p>
                            
                            <!-- Image Preview -->
                            <div class="w-full h-64 bg-gray-100 rounded-lg mb-4 flex items-center justify-center border-2 border-dashed border-gray-300">
                                <img id="image-preview" src="" alt="Image Preview" class="hidden max-h-full max-w-full rounded-lg">
                                <span id="image-placeholder" class="text-gray-500">Image preview will appear here</span>
                            </div>

                            <!-- File Input -->
                            <div class="flex items-center gap-4">
                                <label class="file-input-wrapper flex-1">
                                    <span class="w-full text-center py-2 px-4 bg-gray-200 text-gray-700 font-medium rounded-lg shadow-sm hover:bg-gray-300 transition-colors cursor-pointer">Choose Image</span>
                                    <input type="file" id="image-upload" accept="image/*">
                                </label>
                                <button id="analyze-image-button" class="py-2 px-6 bg-emerald-600 text-white font-medium rounded-lg shadow-md hover:bg-emerald-700 transition-colors disabled:opacity-50" disabled>
                                    Analyze
                                </button>
                            </div>
                        </div>

                        <!-- Text Prompt -->
                        <div class="bg-white p-6 rounded-lg shadow-lg">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">Ask Agro-AI (Text)</h2>
                            <p class="text-gray-600 mb-4">Ask any question about crop management, solutions, or best practices.</p>

                            <textarea id="ai-text-prompt" class="w-full h-40 p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" placeholder="e.g., What are the best organic treatments for powdery mildew on cucumbers?"></textarea>
                            <button id="ask-ai-button" class="w-full mt-4 py-3 px-6 bg-emerald-600 text-white font-medium rounded-lg shadow-md hover:bg-emerald-700 transition-colors">
                                Get Advice
                            </button>
                        </div>
                    </div>

                    <!-- AI Results Area -->
                    <div class="bg-white p-6 rounded-lg shadow-lg mt-8">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">AI Advisor Response</h2>
                        <!-- Loader -->
                        <div id="ai-loader" class="hidden flex flex-col items-center justify-center h-32">
                            <div class="loader"></div>
                            <p class="text-gray-600 mt-3">Analyzing, please wait...</p>
                        </div>
                        <!-- Response Content -->
                        <div id="ai-response-content" class="text-gray-700 space-y-3 prose max-w-none">
                            <p class="text-gray-500">Your AI-generated advice will appear here.</p>
                        </div>
                    </div>
                </section>

                <!-- ===== PAGE: Weather Forecast ===== -->
                <section id="page-weather" class="page-section">
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">7-Day Weather Forecast - Pune, IN</h2>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="border-b-2 border-gray-200">
                                    <tr>
                                        <th class="py-3 px-4 font-semibold text-gray-600">Day</th>
                                        <th class="py-3 px-4 font-semibold text-gray-600">Condition</th>
                                        <th class="py-3 px-4 font-semibold text-gray-600">High / Low</th>
                                        <th class="py-3 px-4 font-semibold text-gray-600">Precip.</th>
                                        <th class="py-3 px-4 font-semibold text-gray-600">Wind</th>
                                    </tr>
                                </thead>
                                <tbody id="weather-table-body" class="divide-y divide-gray-100">
                                    <!-- Mock data will be injected here by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- ===== PAGE: Market Prices ===== -->
                <section id="page-market" class="page-section">
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Commodity Market Prices</h2>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead class="border-b-2 border-gray-200">
                                    <tr>
                                        <th class="py-3 px-4 font-semibold text-gray-600">Commodity</th>
                                        <th class="py-3 px-4 font-semibold text-gray-600">Price (per Ton)</th>
                                        <th class="py-3 px-4 font-semibold text-gray-600">Change (24h)</th>
                                        <th class="py-3 px-4 font-semibold text-gray-600">Trend</th>
                                    </tr>
                                </thead>
                                <tbody id="market-table-body" class="divide-y divide-gray-100">
                                    <!-- Mock data will be injected here by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- ===== PAGE: Farm Management ===== -->
                <section id="page-management" class="page-section">
                    <div class="bg-white p-6 rounded-lg shadow-lg text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="mx-auto text-emerald-500 mb-4"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 15h1.5a2.5 2.5 0 0 1 0 5H4"/><path d="M20 15h-1.5a2.5 2.5 0 0 0 0 5H20"/><rect width="10" height="6" x="7" y="9" rx="2"/><path d="M9 9V7c0-1.1.9-2 2-2h2c1.1 0 2 .9 2 2v2"/><path d="M9 15v2c0 1.1.9 2 2 2h2c1.1 0 2-.9 2-2v-2"/></svg>
                        <h2 class="text-2xl font-semibold text-gray-800 mb-2">Farm Management System</h2>
                        <p class="text-gray-600 max-w-md mx-auto">This module is under development. Soon, you'll be able to track assets, manage inventory, schedule tasks, and monitor your farm's complete workflow right from here.</p>
                    </div>
                </section>

            </main>
        </div>
    </div>

    <!-- Mobile Sidebar Backdrop -->
    <div id="sidebar-backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden"></div>


    <!-- Firebase SDK Imports -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            onAuthStateChanged, 
            createUserWithEmailAndPassword, 
            signInWithEmailAndPassword, 
            signOut,
            signInAnonymously,
            signInWithCustomToken,
            GoogleAuthProvider,
            FacebookAuthProvider,
            TwitterAuthProvider,
            signInWithRedirect,
            getRedirectResult
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- Firebase & App Config ---
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        setLogLevel('debug');

        // --- Auth Providers ---
        const googleProvider = new GoogleAuthProvider();
        const facebookProvider = new FacebookAuthProvider();
        const twitterProvider = new TwitterAuthProvider();


        // --- Gemini API Configuration ---
        // IMPORTANT: In a real app, this key should be empty and managed by a secure backend.
        // For this demo, we use the provided mechanism.
        const apiKey = ""; 
        const textApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        const visionApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        // --- System Prompts for AI ---
        const textSystemPrompt = `
You are "CultiVAIte AI," an expert agronomist and farm advisor. 
Your goal is to provide concise, actionable, and easy-to-understand advice to farmers.
- Start with a clear, direct answer to the user's question.
- Use bullet points to list steps, recommendations, or key considerations.
- If recommending a treatment, suggest both organic and chemical options if possible.
- Maintain a supportive and knowledgeable tone.
- Format your response in simple HTML (use <p>, <ul>, <li>, <strong>).
`;

        const imageSystemPrompt = `
You are "CultiVAIte AI," an expert plant pathologist.
A farmer has uploaded an image of a plant. Your task is to:
1.  **Identify the Plant:** (e.g., "This appears to be a tomato plant.")
2.  **Diagnose the Issue:** Clearly identify the most likely disease, pest infestation, or nutrient deficiency visible in the image. (e.g., "The leaves show classic signs of early blight...")
3.  **State Confidence Level:** (e.g., "Confidence: High")
4.  **Provide Actionable Solutions:** Give the farmer a step-by-step plan.
    * **Immediate Actions:** (e.g., "Remove and destroy affected leaves.")
    * **Treatment (Organic):** (e.g., "Apply a neem oil or copper-based fungicide.")
    * **Treatment (Chemical):** (e.g., "Use a fungicide containing chlorothalonil.")
    * **Prevention:** (e.g., "Ensure proper spacing for airflow, water at the base of the plant.")
- If the image is unclear or the plant looks healthy, state that.
- Format your response in simple HTML (use <h2>, <p>, <ul>, <li>, <strong>).
`;


        // --- Utility: fetch with Exponential Backoff ---
        async function fetchWithBackoff(url, payload, maxRetries = 5) {
            let attempt = 0;
            while (attempt < maxRetries) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();

                    if (!result.candidates || !result.candidates[0].content || !result.candidates[0].content.parts[0].text) {
                        throw new Error("Invalid response structure from API.");
                    }
                    
                    // Success
                    return result.candidates[0].content.parts[0].text;

                } catch (error) {
                    console.error(`Attempt ${attempt + 1} failed:`, error.message);
                    if (attempt === maxRetries - 1) {
                        throw error; // Throw last error
                    }
                    // Wait with exponential backoff
                    const delay = (2 ** attempt) * 1000 + (Math.random() * 1000);
                    await new Promise(res => setTimeout(res, delay));
                    attempt++;
                }
            }
            throw new Error("API call failed after all retries.");
        }

        // --- Utility: File to Base64 ---
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                    // Returns the full data URL, e.g., "data:image/jpeg;base64,..."
                    resolve(reader.result);
                };
                reader.onerror = error => reject(error);
            });
        }

        // --- App Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            // initApp(); // This is now called by onAuthStateChanged
            setupAuth();
        });

        // --- Authentication Logic ---
        function setupAuth() {
            const authContainer = document.getElementById('auth-container');
            const mainAppContainer = document.getElementById('main-app-container');
            
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            const authError = document.getElementById('auth-error');

            const userGreeting = document.getElementById('user-greeting');
            const logoutButton = document.getElementById('logout-button');

            const toggleToSignup = document.getElementById('toggle-to-signup');
            const toggleToLogin = document.getElementById('toggle-to-login');
            const toggleToSignupText = document.getElementById('toggle-to-signup-text');
            const toggleToLoginText = document.getElementById('toggle-to-login-text');

            // Social Sign-in Buttons
            const googleBtn = document.getElementById('google-signin');
            const facebookBtn = document.getElementById('facebook-signin');
            const twitterBtn = document.getElementById('twitter-signin');

            // --- Handle Redirect Result ---
            // Check for a redirect result when the page loads
            getRedirectResult(auth)
                .then((result) => {
                    if (result) {
                        // User successfully signed in via redirect.
                        // onAuthStateChanged will handle showing the app.
                        console.log("Redirect sign-in successful:", result.user);
                    }
                }).catch((error) => {
                    // Handle errors from redirect
                    console.error("Redirect Sign-in Error:", error.message);
                    authError.textContent = getFriendlyAuthError(error.code);
                });


            // Toggle forms
            toggleToSignup.addEventListener('click', (e) => {
                e.preventDefault();
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
                toggleToSignupText.classList.add('hidden');
                toggleToLoginText.classList.remove('hidden');
                authError.textContent = '';
            });

            toggleToLogin.addEventListener('click', (e) => {
                e.preventDefault();
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
                toggleToSignupText.classList.remove('hidden');
                toggleToLoginText.classList.add('hidden');
                authError.textContent = '';
            });
            
            // Handle Login
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                authError.textContent = '';
                
                try {
                    await signInWithEmailAndPassword(auth, email, password);
                    // onAuthStateChanged will handle UI swap
                } catch (error) {
                    console.error("Login Error:", error.message);
                    authError.textContent = getFriendlyAuthError(error.code);
                }
            });

            // Handle Signup
            signupForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('signup-email').value;
                const password = document.getElementById('signup-password').value;
                const confirmPassword = document.getElementById('signup-confirm-password').value;
                authError.textContent = '';

                if (password !== confirmPassword) {
                    authError.textContent = 'Passwords do not match.';
                    return;
                }

                try {
                    await createUserWithEmailAndPassword(auth, email, password);
                    // onAuthStateChanged will handle UI swap
                } catch (error) {
                    console.error("Signup Error:", error.message);
                    authError.textContent = getFriendlyAuthError(error.code);
                }
            });

            // Handle Logout
            logoutButton.addEventListener('click', async () => {
                try {
                    await signOut(auth);
                    // onAuthStateChanged will handle UI swap
                } catch (error) {
                    console.error("Signout Error:", error.message);
                }
            });

            // --- Handle Social Sign-in ---
            const signInWithSocial = async (provider) => {
                authError.textContent = '';
                try {
                    // Use signInWithRedirect instead of signInWithPopup
                    await signInWithRedirect(auth, provider);
                    // The page will now redirect, no further code here will execute.
                } catch (error) {
                    console.error("Social Sign-in Redirect Error:", error.message);
                    authError.textContent = getFriendlyAuthError(error.code);
                }
            };

            googleBtn.addEventListener('click', () => signInWithSocial(googleProvider));
            facebookBtn.addEventListener('click', () => signInWithSocial(facebookProvider));
            twitterBtn.addEventListener('click', () => signInWithSocial(twitterProvider));


            // --- Auth State Controller ---
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    // User is signed in
                    authContainer.classList.add('hidden');
                    mainAppContainer.classList.remove('hidden');
                    // Use email, but fall back to DisplayName for social logins
                    userGreeting.textContent = `Welcome, ${user.email || user.displayName}`;
                    
                    // Initialize the main app logic ONLY after login
                    initApp(); 
                } else {
                    // User is signed out
                    authContainer.classList.remove('hidden');
                    mainAppContainer.classList.add('hidden');
                    userGreeting.textContent = '';
                }
            });

            // Auto-sign-in with provided token or anonymously
            if (initialAuthToken) {
                signInWithCustomToken(auth, initialAuthToken).catch((error) => {
                    console.error("Custom token sign-in error:", error);
                    signInAnonymously(auth).catch((err) => console.error("Anonymous sign-in error:", err));
                });
            } else if (!auth.currentUser) {
                // If no token and no user, sign in anonymously for demo (or just show login)
                // For this use case, we want to force Email/Pass login.
                // So we'll *not* sign in anonymously.
                console.log("No initial token. Awaiting user login.");
            }
        }

        function getFriendlyAuthError(code) {
            switch (code) {
                case 'auth/invalid-email':
                    return 'Please enter a valid email address.';
                case 'auth/user-not-found':
                case 'auth/wrong-password':
                    return 'Invalid email or password.';
                case 'auth/email-already-in-use':
                    return 'An account with this email already exists.';
                case 'auth/weak-password':
                    return 'Password should be at least 6 characters.';
                case 'auth/operation-not-allowed':
                    return 'Email/password accounts are not enabled.';
                case 'auth/popup-blocked':
                    return 'Popup blocked by browser. Please allow popups.';
                case 'auth/account-exists-with-different-credential':
                    return 'An account already exists with this email using a different login method.';
                default:
                    return 'An error occurred. Please try again.';
            }
        }


        function initApp() {
            setupNavigation();
            setupAIAdvisor();
            loadDashboardData(); // Load mock data
        }

        // --- Navigation Logic ---
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page-section');
            const pageTitle = document.getElementById('page-title');
            const sidebar = document.getElementById('sidebar');
            const menuButton = document.getElementById('mobile-menu-button');
            const backdrop = document.getElementById('sidebar-backdrop');

            const showPage = (pageId) => {
                // Hide all pages
                pages.forEach(page => page.classList.remove('active'));
                
                // Show target page
                const targetPage = document.getElementById(`page-${pageId}`);
                if (targetPage) {
                    targetPage.classList.add('active');
                }

                // Update nav link styles
                navLinks.forEach(link => {
                    if (link.dataset.page === pageId) {
                        link.classList.add('bg-emerald-100', 'text-emerald-700');
                        link.classList.remove('text-gray-500', 'hover:bg-gray-100', 'hover:text-gray-900');
                        pageTitle.textContent = link.querySelector('span').textContent;
                    } else {
                        link.classList.remove('bg-emerald-100', 'text-emerald-700');
                        link.classList.add('text-gray-500', 'hover:bg-gray-100', 'hover:text-gray-900');
                    }
                });
                
                // Close mobile menu
                sidebar.classList.add('-translate-x-full');
                backdrop.classList.add('hidden');
            };

            // Add click listeners to nav links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = e.currentTarget.dataset.page;
                    showPage(pageId);
                });
            });
            
            // Mobile menu toggle
            menuButton.addEventListener('click', () => {
                sidebar.classList.remove('-translate-x-full');
                backdrop.classList.remove('hidden');
            });
            
            backdrop.addEventListener('click', () => {
                sidebar.classList.add('-translate-x-full');
                backdrop.classList.add('hidden');
            });

            // Show default page
            showPage('dashboard');
        }

        // --- AI Advisor Logic ---
        function setupAIAdvisor() {
            const imageUpload = document.getElementById('image-upload');
            const imagePreview = document.getElementById('image-preview');
            const imagePlaceholder = document.getElementById('image-placeholder');
            const analyzeButton = document.getElementById('analyze-image-button');
            
            const textPromptInput = document.getElementById('ai-text-prompt');
            const askButton = document.getElementById('ask-ai-button');
            
            const loader = document.getElementById('ai-loader');
            const responseContent = document.getElementById('ai-response-content');
            
            let uploadedFile = null;

            // Handle image preview
            imageUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    uploadedFile = file;
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        imagePreview.src = event.target.result;
                        imagePreview.classList.remove('hidden');
                        imagePlaceholder.classList.add('hidden');
                        analyzeButton.disabled = false;
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Handle Image Analysis
            analyzeButton.addEventListener('click', async () => {
                if (!uploadedFile) return;

                loader.style.display = 'flex';
                responseContent.innerHTML = '';
                
                try {
                    // 1. Convert file to base64
                    const dataUrl = await fileToBase64(uploadedFile);
                    const base64Data = dataUrl.split(',')[1]; // Get only the base64 part
                    
                    // 2. Construct payload
                    const payload = {
                        contents: [{
                            parts: [
                                { text: "Analyze this plant image." },
                                {
                                    inlineData: {
                                        mimeType: uploadedFile.type,
                                        data: base64Data
                                    }
                                }
                            ]
                        }],
                        systemInstruction: { parts: [{ text: imageSystemPrompt }] }
                    };

                    // 3. Call API
                    const responseText = await fetchWithBackoff(visionApiUrl, payload);
                    responseContent.innerHTML = responseText;
                    
                } catch (error) {
                    console.error("Image analysis failed:", error);
                    responseContent.innerHTML = `<p class="text-red-600"><strong>Error:</strong> Could not analyze the image. ${error.message}</p>`;
                } finally {
                    loader.style.display = 'none';
                }
            });

            // Handle Text Prompt
            askButton.addEventListener('click', async () => {
                const prompt = textPromptInput.value;
                if (!prompt) return;

                loader.style.display = 'flex';
                responseContent.innerHTML = '';
                
                try {
                    // 1. Construct payload
                    const payload = {
                        contents: [{ parts: [{ text: prompt }] }],
                        systemInstruction: { parts: [{ text: textSystemPrompt }] }
                    };
                    
                    // 2. Call API
                    const responseText = await fetchWithBackoff(textApiUrl, payload);
                    responseContent.innerHTML = responseText;
                    
                } catch (error) {
                    console.error("Text prompt failed:", error);
                    responseContent.innerHTML = `<p class="text-red-600"><strong>Error:</strong> Could not get advice. ${error.message}</p>`;
                } finally {
                    loader.style.display = 'none';
                    textPromptInput.value = ''; // Clear input
                }
            });
        }
        
        // --- Mock Data Loading ---
        function loadDashboardData() {
            // Weather (already hardcoded in HTML, but could be dynamic)
            // document.getElementById('weather-temp').textContent = '28°C';
            // document.getElementById('weather-desc').textContent = 'Partly Cloudy';
            
            // --- Define Weather Icons ---
            const weatherIcons = {
                sun: '<circle cx="12" cy="12" r="5"/><line x1="12" x2="12" y1="1" y2="3"/><line x1="12" x2="12" y1="21" y2="23"/><line x1="4.22" x2="5.64" y1="4.22" y2="5.64"/><line x1="18.36" x2="19.78" y1="18.36" y2="19.78"/><line x1="1" x2="3" y1="12" y2="12"/><line x1="21" x2="23" y1="12" y2="12"/><line x1="4.22" x2="5.64" y1="19.78" y2="18.36"/><line x1="18.36" x2="19.78" y1="5.64" y2="4.22"/>',
                cloud: '<path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/>',
                rain: '<path d="M16 13v8"/><path d="M8 13v8"/><path d="M12 15v8"/><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"/>'
            };

            // --- Generate Dynamic Day Names ---
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const today = new Date();
            const forecastDays = [];
            
            for (let i = 0; i < 7; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                
                if (i === 0) {
                    forecastDays.push('Today');
                } else if (i === 1) {
                    forecastDays.push('Tomorrow');
                } else {
                    forecastDays.push(dayNames[date.getDay()]);
                }
            }
            
            // Populate Weather Forecast Table
            const weatherTable = document.getElementById('weather-table-body');
            const weatherData = [
                { day: forecastDays[0], icon: 'cloud', color: 'text-gray-500', high: 28, low: 22, precip: '10%', wind: '15 km/h' },
                { day: forecastDays[1], icon: 'sun', color: 'text-amber-500', high: 30, low: 22, precip: '0%', wind: '10 km/h' },
                { day: forecastDays[2], icon: 'rain', color: 'text-blue-500', high: 27, low: 21, precip: '60%', wind: '20 km/h' },
                { day: forecastDays[3], icon: 'sun', color: 'text-amber-500', high: 31, low: 23, precip: '0%', wind: '12 km/h' },
                { day: forecastDays[4], icon: 'cloud', color: 'text-gray-500', high: 29, low: 23, precip: '20%', wind: '18 km/h' },
                { day: forecastDays[5], icon: 'sun', color: 'text-amber-500', high: 32, low: 24, precip: '0%', wind: '10 km/h' },
                { day: forecastDays[6], icon: 'rain', color: 'text-blue-500', high: 28, low: 22, precip: '70%', wind: '25 km/h' }
            ];
            
            weatherTable.innerHTML = weatherData.map(d => `
                <tr class="hover:bg-gray-50">
                    <td class="py-3 px-4 font-medium text-gray-800">${d.day}</td>
                    <td class="py-3 px-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${d.color}">
                            ${weatherIcons[d.icon] || ''}
                        </svg>
                    </td>
                    <td class="py-3 px-4 text-gray-700">${d.high}° / ${d.low}°C</td>
                    <td class="py-3 px-4 text-gray-700">${d.precip}</td>
                    <td class="py-3 px-4 text-gray-700">${d.wind}</td>
                </tr>
            `).join('');

            // Populate Market Prices Table
            const marketTable = document.getElementById('market-table-body');
            const marketData = [
                { name: 'Wheat', price: 18250.75, change: 120.25, trend: 'up' },
                { name: 'Corn', price: 15000.50, change: -50.10, trend: 'down' },
                { name: 'Soybeans', price: 37200.00, change: 250.00, trend: 'up' },
                { name: 'Tomatoes', price: 7050.00, change: 15.50, trend: 'up' },
                { name: 'Potatoes', priitce: 5000.00, change: 0.00, trend: 'stable' }
            ];
            
            marketTable.innerHTML = marketData.map(item => `
                <tr class="hover:bg-gray-50">
                    <td class="py-3 px-4 font-medium text-gray-800">${item.name}</td>
                    <td class="py-3 px-4 text-gray-700">₹${item.price.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</td>
                    <td class="py-3 px-4 font-medium ${item.trend === 'up' ? 'text-green-600' : item.trend === 'down' ? 'text-red-600' : 'text-gray-500'}">
                        ${item.trend === 'up' ? '▲' : item.trend === 'down' ? '▼' : '–'} ${item.change.toFixed(2)}
                    </td>
                    <td class="py-3 px-4">
                        <span class="px-3 py-1 text-xs font-medium rounded-full ${item.trend === 'up' ? 'bg-green-100 text-green-800' : item.trend === 'down' ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'}">
                            ${item.trend.charAt(0).toUpperCase() + item.trend.slice(1)}
                        </span>
                    </td>
                </tr>
            `).join('');
        }

    </script>
</body>
</html>


